<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PyScript PDF åˆä½µå·¥å…· (æ‹–æ‹‰ç‰ˆ)</title>
    <link rel="stylesheet" href="./style.css">
    
    <link rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/core.css" />
    <script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
</head>
<body>

    <div class="container">
        <h1>ğŸ“„ PDF åˆä½µç¥å™¨</h1>
        <p>by Wei</p>

        <label for="file-input" class="custom-file-upload">
            ğŸ“‚ é»æ“Šé¸æ“‡æˆ–æ–°å¢ PDF æª”æ¡ˆ
        </label>
        <input type="file" id="file-input" multiple accept=".pdf">

        <div id="file-list-container"></div>

        <button id="merge-btn">ğŸš€ é–‹å§‹åˆä½µ</button>

        <div id="status"></div>
        <a id="download-link" href="#" style="display:none;" download="merged.pdf">ğŸ“¥ ä¸‹è¼‰åˆä½µå¾Œçš„æª”æ¡ˆ</a>
    </div>

    <script type="py" src="./main.py" config="./pyscript.toml"></script>

    <script>
        // ç­‰å¾…é é¢è¼‰å…¥
        document.addEventListener('DOMContentLoaded', (event) => {
            const listContainer = document.getElementById('file-list-container');

            // å•Ÿç”¨ SortableJS
            new Sortable(listContainer, {
                animation: 150, // æ‹–æ‹‰å¹³æ»‘å‹•ç•« (ms)
                ghostClass: 'sortable-ghost', // æ›¿èº« class
                handle: '.drag-handle', // åƒ…å¯å¾æŠŠæ‰‹æ‹–å‹•

                // æ‹–æ‹‰çµæŸäº‹ä»¶
                onEnd: function (evt) {
                    // èˆŠç´¢å¼•èˆ‡æ–°ç´¢å¼•

                    // å‘¼å« Python æ›´æ–°é †åº
                    if (window.py_on_reorder) {
                        window.py_on_reorder(evt.oldIndex, evt.newIndex);
                    }
                }
            });
        });
    </script>

</body>
</html>